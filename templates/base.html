<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Bridgeworks — {% block title %}{% endblock %}</title>

  <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}"/>
  <link rel="icon" href="{{ url_for('static', filename='favicon.ico') }}"/>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">

  <!-- Plotly base (pages may load a newer bundle if needed) -->
  <script src="https://cdn.plot.ly/plotly-2.18.1.min.js"></script>

  {% block extra_head %}{% endblock %}
</head>
<body>
  <!-- NAV -->
  <header class="nav" role="banner">
    <div class="nav-container">
      <a href="/" class="nav-logo-link" aria-label="Bridgeworks home">
        <img src="{{ url_for('static', filename='bridgeworks-logo.png') }}"
             alt="Bridgeworks Collective" class="nav-logo"/>
      </a>

      <div class="brand">Bridgeworks Collective</div>

      <!-- Mobile toggle -->
      <button class="nav-toggle" aria-controls="primary-navigation" aria-expanded="false" aria-label="Menu">
        <span class="hamburger"></span>
      </button>

      <!-- Primary nav -->
      <ul id="primary-navigation" class="nav-menu" role="navigation">
        <li><a href="/home">Home</a></li>
        <li><a href="/">Schedule</a></li>
        <li><a href="/budget">Project Budget</a></li>
        <li><a href="/survey">Survey</a></li>
      </ul>
    </div>
  </header>

  <!-- MAIN -->
  <main class="container" role="main">
    {% block content %}{% endblock %}
  </main>

  <!-- FOOTER -->
  <footer class="footer">© 2025 Bridgeworks Collective</footer>

  <!-- Small, CSP-friendly inline script to drive the mobile dropdown -->
  <script>
  (function () {
    var toggle = document.querySelector('.nav-toggle');
    var menu   = document.querySelector('.nav-menu');
    if (!toggle || !menu) return;

    function closeMenu() {
      toggle.classList.remove('active');
      menu.classList.remove('active');
      toggle.setAttribute('aria-expanded', 'false');
      document.body.classList.remove('nav-open');
    }

    toggle.addEventListener('click', function () {
      var open = !toggle.classList.contains('active');
      toggle.classList.toggle('active', open);
      menu.classList.toggle('active', open);
      toggle.setAttribute('aria-expanded', open ? 'true' : 'false');
      document.body.classList.toggle('nav-open', open);
    });

    // Close when a link is clicked (mobile)
    menu.querySelectorAll('a').forEach(function (a) {
      a.addEventListener('click', closeMenu);
    });

    // Reset state on resize to desktop
    var mq = window.matchMedia('(min-width: 861px)');
    mq.addEventListener ? mq.addEventListener('change', function (e) {
      if (e.matches) closeMenu();
    }) : window.addEventListener('resize', function () {
      if (window.innerWidth >= 861) closeMenu();
    });
  })();
  </script>

  {% block extra_scripts %}{% endblock %}
</body>
</html>
